# ==============================================================================
# Owl Browser License Server - Environment Configuration
# ==============================================================================
# Copy this file to .env and modify as needed.
# DO NOT commit .env to version control!
# ==============================================================================

# ==============================================================================
# Database Configuration
# ==============================================================================
# PostgreSQL is used by default in Docker deployment
OLIB_DB_TYPE=postgresql
OLIB_DB_NAME=olib_licenses
OLIB_DB_USER=olib
OLIB_DB_PASSWORD=change_this_secure_password

# ==============================================================================
# Admin Server Configuration
# ==============================================================================
# Port for admin panel and customer portal
OLIB_ADMIN_PORT=3035

# Admin login credentials
OLIB_ADMIN_USERNAME=admin

# Password hash (generated with: python -c "from werkzeug.security import generate_password_hash; print(generate_password_hash('your_password'))")
# Default is empty = password prompt on first login
OLIB_ADMIN_PASSWORD_HASH=

# Flask secret key for session management (CHANGE THIS!)
OLIB_ADMIN_SECRET_KEY=change-this-to-a-random-string-in-production

# ==============================================================================
# License API Server Configuration
# ==============================================================================
# Port for browser license validation API
OLIB_LICENSE_SERVER_PORT=3034

# HMAC secret for nonce authentication (MUST match browser build!)
OWL_NONCE_HMAC_SECRET=change-this-to-match-browser-secret

# ==============================================================================
# Session Configuration
# ==============================================================================
# Customer portal session lifetime in hours
SESSION_LIFETIME_HOURS=168

# Nonce timestamp tolerance in seconds (for API requests)
NONCE_TIMESTAMP_TOLERANCE=300

# ==============================================================================
# Key Management
# ==============================================================================
# Set to true to auto-generate RSA keys on first start
# WARNING: New keys will invalidate all existing licenses!
# For production, mount your existing keys to /app/keys/
GENERATE_KEYS=false

# ==============================================================================
# Production Recommendations
# ==============================================================================
# 1. Use strong, unique passwords
# 2. Generate random secret keys:
#    python -c "import secrets; print(secrets.token_hex(32))"
# 3. Mount existing RSA keys rather than generating new ones
# 4. Enable HTTPS via reverse proxy (nginx, traefik, etc.)
# 5. Set up regular backups for /app/data and /app/keys
# ==============================================================================
